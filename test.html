<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>第一个three.js文件_WebGL三维场景</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      /* 隐藏body窗口区域滚动条 */
    }
  </style>
  <script src="./stats.min.js"></script>
  <!--引入three.js三维引擎-->
  <script>
	if (location.origin == "http://192.168.31.89"){
		document.write('<script src="./three.min.js"><\/script>');
	}else{
		document.write('<script src="https://wzh656.github.io/notice/js/three.min.js"><\/script>');
	}
  </script>
  
  <!-- <script src="./three.js"></script> -->
  <!-- <script src="http://www.yanhuangxueyuan.com/versions/threejsR92/build/three.js"></script> -->
  <!-- <script src="http://www.yanhuangxueyuan.com/threejs/build/three.js"></script> -->
</head>

<!-- <span id="fps" style="position:absolute;"></span> -->

<body>
  <script>
    /**
     * 创建场景对象Scene
     */
    var scene = new THREE.Scene();
	
    /**
     * 创建网格模型
     */
    var geometry = new THREE.BoxGeometry(100, 200, 300); //创建一个立方体几何对象Geometry
    var material = new THREE.MeshLambertMaterial({
      color: 0x66ff88
    }); //材质对象Material
    var mesh = new THREE.Mesh(geometry, material); //网格模型对象Mesh
    scene.add(mesh); //网格模型添加到场景中
	
	var geometry2 = new THREE.SphereGeometry(100, 36, 36); //创建一个球体几何对象
	var material2 = new THREE.MeshLambertMaterial({
      color: 0xff0000
    }); //材质对象Material
    var mesh2 = new THREE.Mesh(geometry2, material2); //网格模型对象Mesh
	mesh2.position.x = 366;
    scene.add(mesh2); //网格模型添加到场景中
	
	var geometry3 = new THREE.SphereGeometry(100, 36, 36); //创建一个球体几何对象
	var material3 = new THREE.MeshLambertMaterial({
      color: 0xffff00
    }); //材质对象Material
    var mesh3 = new THREE.Mesh(geometry3, material3); //网格模型对象Mesh
	mesh3.position.y = 366;
    scene.add(mesh3); //网格模型添加到场景中
	
	var geometry4 = new THREE.SphereGeometry(100, 36, 36); //创建一个球体几何对象
	var material4 = new THREE.MeshLambertMaterial({
      color: 0xff00ff
    }); //材质对象Material
    var mesh4 = new THREE.Mesh(geometry4, material4); //网格模型对象Mesh
	mesh4.position.z = 366;
    scene.add(mesh4); //网格模型添加到场景中
	
    /**
     * 光源设置
     */
    //点光源
    var point = new THREE.PointLight(0xffffff);
    point.position.set(400, 200, 300); //点光源位置
    scene.add(point); //点光源添加到场景中
    //环境光
    var ambient = new THREE.AmbientLight(0x444444);
    scene.add(ambient);
    console.log(scene)
    console.log(scene.children)
	
    /**
     * 相机设置
     */
    var width = window.innerWidth; //窗口宽度
    var height = window.innerHeight; //窗口高度
    var k = width / height; //窗口宽高比
    var s = 266; //三维场景显示范围控制系数，系数越大，显示的范围越大
    //创建相机对象
    var camera = new THREE.OrthographicCamera(-s * k, s * k, s, -s, 1, 1000);
    camera.position.set(200, 300, 0); //设置相机位置
    camera.lookAt(scene.position); //设置相机方向(指向的场景对象)
    
	/**
     * 创建渲染器对象
     */
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(width, height);//设置渲染区域尺寸
    renderer.setClearColor(0x000000, 1); //设置背景颜色
    document.body.appendChild(renderer.domElement); //body元素中插入canvas对象
    //执行渲染操作   指定场景、相机作为参数
    renderer.render(scene, camera);
	
	var stats = new Stats();
	stats.showPanel(0);
	document.body.appendChild(stats.dom);
	
	let T0 = new Date();//上次时间
	function render() {
        let t = new Date()-T0;//时间差
		//document.getElementById("fps").innerHTML=Math.round(1000/t)+"fps<br/>("+t+"ms/帧)";
        T0 = new Date();//把本次时间赋值给上次时间
        requestAnimationFrame(render);
        renderer.render(scene, camera);//执行渲染操作
        mesh.rotateY(90/180*Math.PI/1000*t);//旋转角速度90度每秒
        mesh2.rotateZ(360/180*Math.PI/1000*t);//旋转角速度360度每秒
		//camera.position.x = camera.position.x<600? camera.position.x+100/1000*t: -300;// 100/s
		//camera.position.z = Math.sin(T0/166)*66;
		//camera.position.y = Math.tan(T0/666)*66+366;
		stats.update();
    }
	render();
	// 间隔30ms周期性调用函数fun
	//setInterval("render()",16.7)
	
	document.onkeydown = function (e){
		console.log(e.keyCode);
		if (e.keyCode == 87 | e.keyCode == 38){
			camera.position.x -= 10;
		}
		if (e.keyCode == 83 | e.keyCode == 40){
			camera.position.x += 10;
		}
		if (e.keyCode == 65 | e.keyCode == 37){
			camera.position.z += 10;
		}
		if (e.keyCode == 68 | e.keyCode == 39){
			camera.position.z -= 10;
		}
		if (e.keyCode == 32){
			camera.position.y += 10;
		}
		if (e.keyCode == 16){
			camera.position.y -= 10;
		}
	}
	/*document.onmousemove = function (e){
		console.log(e.pageX, e.pageY);
		camera.lookAt(e.pageX, e);
	}*/
  </script>
</body>
</html>