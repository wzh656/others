<!DOCTYPE html>
<!--
　┐ ├┬─┐ ┌──┼┼┐
　│ ││　 ┌──┼┼┐
│╯├─┐ ╭──┴╯			W
└╯│   ┌────┐			Z
　│　├─┐ ├────┤		H
　╰┘└　 └────╯
Copyright © 2020 by wzh
保留一切权利
-->
<html lang="zh">
	<head>
		<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>chemistry</title>
		<script src="https://lib.baomitu.com/jquery/3.5.0/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
		<script src="https://cdn.bootcss.com/vConsole/3.3.4/vconsole.min.js"></script>
		<script>eruda.init();</script>
		<script>new VConsole();</script>
<style>
body, input, button, body>label{ /* 背景色 */
	background-color: #fffae8;
}
input[type="radio"]{ /* 隐藏选择 */
	display: none;
}
input:not(:checked) + div{ /* 仅选择的显示 */
	display: none;
}

nav{ /* 导航栏 */
	width: 100%;
	overflow-x: scroll;
	display: flex;
	justify-content: space-around;
}
nav label{ /* 导航栏选项 */
	text-align: center;
	display: inline-block;
	color: #876;
	width: 30vw;
	margin: 0 1vw;
	border: 0.6vw outset #876;
}
h1{
	text-align: center;
	margin-left: 0;
}
h1, h2, h3{ /* 标题 */
	color: #aa6;
	margin-left: 6px;
	text-shadow:
		0px 0px 6px #e0edd3,
		0px 0px 12px #e0edd3,
		0px 0px 18px #e0edd3,
 		0px 0px 24px #e0edd3,
		0px 0px 36px #e0edd3,
		0px 0px 42px #e0edd3,
		0px 0px 6px #e0edd3,
		0px 0px 12px #e0edd3,
		0px 0px 18px #e0edd3,
 		0px 0px 24px #e0edd3,
		0px 0px 36px #e0edd3,
		0px 0px 42px #e0edd3;
}
p{
	text-shadow:
		0px 0px 6px #e0edd3,
		0px 0px 12px #e0edd3,
		0px 0px 18px #e0edd3,
 		0px 0px 24px #e0edd3,
		0px 0px 36px #e0edd3;
	border-bottom: 1px solid black;
	margin: 3vw;
	padding: 3vw;
}
button{ /* 按钮 */
	border-radius: 1vw;
}
input:focus, li:active, button:active, label:active{ /* 被点击高亮 */
	background-color: #e0edd3;
}

input:not([type]){ /* 输入文本框 */
	width: 80%;
	border-radius: 1vw;
}

ul{ /* 结果列表 */
	display: block;
	padding: 0;
	overflow-x: auto;
}
ul > li{ /* 结果列表项 */
	display: block;
	border: 0.6vw inset #e0edd3;
	border-radius: 2vw;
	padding: 1vw;
	margin: 1vw;
}
div > ul > li:first-of-type{ /* 高亮第一 */
	background-color: #e0edd3;
}
div > ul > li.finish:last-of-type{ /* 高亮最后 */
	background-color: #d3ede0;
	text-align: center;
}
div > ul > li:first-of-type:before{
	content: "最简：";
	font-weight: bold;
}
footer{
	width: 100%;
	position: absolute;
	bottom: 0;
	text-align: center;
}
</style>
	</head>
	<body>
		<nav>
			<label for="first">化学方程式</label>
			<label for="second">关于</label>
		</nav>
		<input id="first" name="choice" type="radio" checked />
		<div>
			<h1>化学方程式</h1>
			<p><label for="expression">请输入化学方程式：</label></p>
			<input id="expression" value="KClO3--KCl+O2" />
			<button>配平</button>
			<hr/>
			<ul><h3>结果</h3></ul>
			<hr/>
			<div>
				<h2>使用规范与注意事项</h2>
				<ol>
					<li>输入时，短线应该写作两个横线（“--”）</li>
					<li>输入时，不必输入反应条件与上下箭头“↑”“↓”；<b>但作答时必须写上！</b></li>
					<li>输入时，原子下标应该输入普通数字。如：“H₂O”写作“H2O”</li>
					<li>输入时，<b>原子团</b>必须用乘法分配律分配，不允许输入括号（其实是懒得添加支持）。如：“Ca(OH)2”必须写作“CaO2H2”</li>
				</ol>
			</div>
		</div>
		<input id="second" name="choice" type="radio" />
		<div>
			<h1>关于</h1>
			<p>作者：WZH</p>
			<p>QQ：1826632591</p>
			<p>有改进意见等欢迎加QQ：<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=1826632591&site=qq&menu=yes"><img border="0" src="http://wpa.qq.com/pa?p=2:1826632591:51" alt="点击这里给我发消息" title="点击这里给我发消息"/></a></p>
			<p>邮箱：<a href="mailto:1826632591@qq.com?subject=来自《化学方程式》程序">1826632591@qq.com</a></p>
			<details>
				<summary>同开发者的其他程序</summary>
				<ul>
					<li>
						<details>
							<summary>我的世界（仿）</summary>
							<ul>
								<li><a href="https://github.com/wzh656/MinecraftWeb/releases/download/v2.0.0-alpha/Minecraft.apk">手机APK版</a></li>
								<li><a href="https://wzh656.github.io/MinecraftWeb/home.html">网页版（网速慢者无法打开）</a></li>
							</ul>
						</details>
					</li>
					<li>
						<details>
							<summary>五子棋</summary>
							<ul>
								<li><a href="https://wzh656.github.io/gobang/">网页版</a></li>
							</ul>
						</details>
					</li>
				</ul>
			</details>
			<footer>Copyright © 2020 by WZH 保留一切权利</footer>
		</div>
<script>
$(function(){
	let expression_event = ()=>{
		$("#expression ~ ul")[0].innerHTML = "<h3>结果（线程执行中）：</h3>";
		let worker = new Worker("./work.js");
		worker.onmessage = function(e){
			console.info(e.data);
			if (e.data === null){
				worker.terminate();
				$("#expression ~ ul")[0].innerHTML += `<li class="finish">线程执行完成</li>`;
				$("#expression ~ ul > h3").html("结果：");
				$("#expression ~ button")
					.css("background-color", "#fffae8")
					.html("配平")
					[0].onclick = ()=>expression_event;
			}else{
				$("#expression ~ ul")[0].innerHTML += `<li>${e.data}</li>`;
			}
		}
		worker.postMessage({type: "expression", value: $("#expression").val()});
		$("#expression ~ button")
			.css("background-color", "#edd3e0")
			.html("停止")
			[0].onclick = ()=>worker.terminate();
		console.log(worker)
	};
	$("#expression ~ button")[0].onclick = ()=>expression_event;
});
</script>
	</body>
</html>
